<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:i="https://github.com/projektanker/icons.avalonia"
        xmlns:vm="using:DbExport.Gui.ViewModels"
        xmlns:c="using:DbExport.Gui.Converters"
        x:Class="DbExport.Gui.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        ExtendClientAreaToDecorationsHint="True"
        ExtendClientAreaChromeHints="PreferSystemChrome"
        ExtendClientAreaTitleBarHeightHint="30"
        Title="Database Migration Wizard"
        Icon="/Assets/Images/DbExport.ico"
        Width="900"
        Height="630"
        CanMaximize="False"
        WindowStartupLocation="CenterScreen">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Grid RowDefinitions="30, *, Auto"
          ColumnDefinitions="Auto, *">
        <Border Grid.Row="0"
                Grid.Column="0"
                Grid.ColumnSpan="2"
                Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                PointerPressed="OnTitleBarPointerPressed">
            <Border.Styles>
                <Style Selector="StackPanel">
                    <Setter Property="Orientation" Value="Horizontal"/>
                    <Setter Property="Spacing" Value="10"/>
                </Style>
                <Style Selector="Image">
                    <Setter Property="Height" Value="16"/>
                    <Setter Property="Stretch" Value="Uniform"/>
                </Style>
                <Style Selector="TextBlock">
                    <Setter Property="VerticalAlignment" Value="Center"/>
                </Style>
                <Style Selector="Button.round /template/ ContentPresenter">
                    <Setter Property="Background" Value="Transparent"/>
                    <Setter Property="Width" Value="30"/>
                    <Setter Property="Height" Value="30"/>
                    <Setter Property="CornerRadius" Value="15"/>
                </Style>
                <Style Selector="Button.round:pointerover /template/ ContentPresenter">
                    <Setter Property="Background" Value="LightSkyBlue"/>
                </Style>
                <Style Selector="Button.round:pressed /template/ ContentPresenter">
                    <Setter Property="Background" Value="CornflowerBlue"/>
                </Style>
            </Border.Styles>
			<Grid ColumnDefinitions="{OnPlatform '*, Auto', macOS='Auto, *'}"
                  Margin="{OnPlatform '10, 0, 140, 0', macOS='65, 0, 10, 0'}">
                <StackPanel Grid.Column="{OnPlatform 0, macOS=1}"
                            HorizontalAlignment="{OnPlatform Left, macOS=Center}">
                    <Image Source="{Binding $parent[Window].Icon, Converter={x:Static c:ImageConverters.WindowIcon}}"/>
                    <TextBlock Text="{Binding $parent[Window].Title}"/>
                </StackPanel>
                <StackPanel Grid.Column="{OnPlatform 1, macOS=0}">
                    <Button Classes="round"
                            i:Attached.Icon="{Binding ThemeSwitchIcon}"
                            ToolTip.Tip="Switch theme"
                            Command="{Binding SwitchThemeCommand}"/>
                </StackPanel>
            </Grid>
        </Border>
        <ContentControl Grid.Row="1"
                        Grid.Column="0"
                        Content="{Binding Sidebar}"/>
        <TransitioningContentControl Grid.Row="1"
                                     Grid.Column="1"
                                     Content="{Binding CurrentPage}"
                                     IsTransitionReversed="{Binding IsPageTransitionReversed}">
            <TransitioningContentControl.PageTransition>
                <CompositePageTransition>
                    <CompositePageTransition.PageTransitions>
                        <PageSlide Duration="0:0:0.25"/>
                        <CrossFade Duration="0:0:0.25"/>
                    </CompositePageTransition.PageTransitions>
                </CompositePageTransition>
            </TransitioningContentControl.PageTransition>
        </TransitioningContentControl>
        <Border Grid.Row="2"
                Grid.Column="0"
                Grid.ColumnSpan="2"
                BorderBrush="Gray"
                BorderThickness="0, 1, 0, 0"
                Padding="10">
            <Grid ColumnDefinitions="Auto, Auto, *, Auto, Auto"
                  ColumnSpacing="5">
                <Grid.Styles>
                    <Style Selector="Button">
                        <Setter Property="HorizontalContentAlignment" Value="Center"/>
                        <Setter Property="VerticalContentAlignment" Value="Center"/>
                    </Style>
                    <Style Selector="Button">
                        <Setter Property="Width" Value="100"/>
                    </Style>
                    <Style Selector="Button > StackPanel">
                        <Setter Property="Orientation" Value="Horizontal"/>
                        <Setter Property="Spacing" Value="5"/>
                    </Style>
                </Grid.Styles>
                <Button Grid.Column="0"
                        Foreground="White"
                        Background="Firebrick"
                        Classes="colored"
                        IsCancel="True"
                        Command="{Binding CloseCommand}"
                        CommandParameter="{Binding $parent[Window]}">
                    <StackPanel>
                        <i:Icon Value="fa-right-from-bracket"/>
                        <TextBlock Text="Close"/>
                    </StackPanel>
                </Button>
                <Button Grid.Column="1"
                        Foreground="White"
                        Background="DodgerBlue"
                        Classes="colored"
                        Command="{Binding OpenAboutDialogCommand}"
                        CommandParameter="{Binding $parent[Window]}">
                    <StackPanel>
                        <i:Icon Value="fa-circle-info"/>
                        <TextBlock Text="About"/>
                    </StackPanel>
                </Button>
                <Button Grid.Column="3"
                        Command="{Binding NavigateToPreviousPageCommand}">
                    <StackPanel>
                        <i:Icon Value="fa-backward-step"/>
                        <TextBlock Text="Previous"/>
                    </StackPanel>
                </Button>
                <Button Grid.Column="4"
                        IsDefault="True"
                        Command="{Binding NavigateToNextPageCommand}">
                    <StackPanel>
                        <TextBlock Text="Next"/>
                        <i:Icon Value="fa-forward-step"/>
                    </StackPanel>
                </Button>
            </Grid>
        </Border>
    </Grid>
</Window>